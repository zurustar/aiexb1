## タスクリスト

### [v] 1. プロジェクトのセットアップ
- [v] `go mod init` を実行してGoモジュールを初期化する。
- [v] `cmd/app` ディレクトリを作成し、エントリーポイントとなる `main.go` を配置する。
- [v] `internal/` ディレクトリを作成し、内部ロジックを配置する準備をする。
- [v] CGO依存のSQLiteライブラリ `crawshaw.io/sqlite` を追加する。（後にPure-Goに修正）

### [v] 2. データベーススキーマの設計と実装
- [v] `internal/db` ディレクトリを作成する。
- [v] `internal/db/schema.sql` ファイルを作成し、`users` と `schedules` テーブルのCREATE文を記述する。
- [v] データベース接続を管理し、`schema.sql` を実行してテーブルを初期化するGoのコード (`internal/db/db.go`) を作成する。

### [v] 3. 【修正】データベースライブラリの入れ替え (Pure-Go対応)
- [v] Pure-Goライブラリ `modernc.org/sqlite` を `go get` で追加する。
- [v] `internal/db/db.go` を `modernc.org/sqlite` のAPIを使って書き直す。
- [v] `internal/repository/user_repository.go` を `modernc.org/sqlite` のAPIを使って書き直す。
- [v] `go mod tidy` を実行して、不要になった `crawshaw.io/sqlite` の依存を削除する。
- [v] アプリケーションがCGOなしで正常に起動することを確認する。

### [v] 4. ユーザー認証APIの実装 (Pure-Go対応)
- [v] アプリケーションを起動する。
- [v] `curl` コマンドを使用して、`/api/users/register` エンドポイントにリクエストを送信し、新しいユーザーが正常に登録できることを確認する。
- [v] `curl` コマンドを使用して、`/api/users/login` エンドポイントにリクエストを送信し、登録したユーザーで正常にログインできることを確認する。
- [v] 不正なリクエスト（例：間違ったパスワード）でログインを試み、適切にエラーが返されることを確認する。
- [v] サンドボックス環境の書き込み権限問題を特定し、DBの保存先を `/tmp` に変更して解決する。
- [v] 関連するコードのクリーンアップと `.gitignore` の作成を行う。

### [v] 5. スケジュール管理API (CRUD) の実装
- [v] JWT認証を導入する（ログイン時のJWT発行、認証ミドルウェア作成）。
- [v] スケジュール関連のモデル、リポジトリ、ハンドラを実装する。
- [v] APIルートを登録し、認証ミドルウェアを適用する。
- [v] APIが要件通りに動作することをテストで確認する。

### [v] 6. スケジュール共有機能の実装
- [v] 既存の実装が要件を満たしていることをテストシナリオを通じて検証する。

### [v] 7. シンプルなWebフロントエンドの実装
- [v] フロントエンドのファイル構造 (`web/`) と、`index.html`, `style.css`, `script.js` を作成する。
- [v] バックエンドに静的ファイル配信機能を追加する。
- [v] PlaywrightによるE2Eテストで基本機能の動作を確認する。
- [v] Playwrightのスクリーンショットで日本語の文字化け問題を特定し、Webフォントを導入して修正する。
- [v] ボタン要素の文字化けをCSSで修正する。
- [v] 最終的なUIの動作確認をPlaywrightで行う。

### [v] 8. テストの実装
- [v] テスト用のヘルパー関数を作成する。
- [v] `internal/handler/user_handler_test.go` を作成し、ユーザー登録・ログインのテストを実装する。
- [v] `internal/handler/schedule_handler_test.go` を作成し、スケジュールCRUDと認可のテストを実装する。
- [v] `go test ./...` を実行し、すべてのテストがパスすることを確認する。

### [ ] 9. プレコミットステップの完了
- [v] 全テストの再実行 (`go test ./...`)
- [v] フロントエンドの検証 (Playwright)
- [v] コードレビューの指摘事項を修正
    - [v] JWT秘密鍵のハードコーディングを修正
    - [v] `Claims` 構造体の重複を解消
    - [v] ユーザー登録時の重複エラーハンドリングを改善
- [v] 修正後の再テスト (`go test ./...`)
- [ ] 最終コードレビューの依頼
- [ ] 学習内容の記録

### [ ] 10. 最終的な提出
- [ ] すべての機能が完成し、テストが通ったら、コードを提出する。